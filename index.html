<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            /* ช่วยให้คำนวณขนาด Padding/Border ไม่ให้กล่องบวม */
        }

        /* นี่คือพื้นที่เขียน CSS */
        body {
            background-color: #f4f4f4;
            /* เปลี่ยนสีพื้นหลังเว็บ */
            font-family: sans-serif;
            /* เปลี่ยนฟอนต์ให้ดูทันสมัยขึ้น */
            display: flex;
            flex-direction: column;
            align-items: center;
            /* จัดทุกอย่างให้อยู่กึ่งกลางหน้าจอ */
            padding: 50px;
        }

        h1 {
            color: #2c3e50;
            /* เปลี่ยนสีหัวข้อ */
            border-bottom: 3px solid #3498db;
            /* ใส่เส้นใต้เท่ๆ */
        }

        img {
            border-radius: 20px;
            /* ทำมุมรูปให้มน (เหมือนใน Elementor) */
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
            /* ใส่เงาให้รูปดูมีมิติ */
            margin-top: 20px;
        }

        .btn-signup {
            /* 1. พื้นฐาน: สีและขนาด */
            background-color: #ff4757;
            /* สีแดงส้มสะดุดตา */
            color: white;
            /* สีตัวอักษร */
            padding: 15px 30px;
            /* ระยะห่างข้างใน (บน-ล่าง 15px, ซ้าย-ขวา 30px) */
            font-size: 18px;
            /* ขนาดตัวอักษร */
            font-weight: bold;
            /* ตัวหนา */
            border: none;
            /* เอาเส้นขอบเดิมๆ ออก */
            border-radius: 50px;
            /* ทำเป็นปุ่มทรงมน (Pill Shape) */
            cursor: pointer;
            /* เปลี่ยนเมาส์เป็นรูปมือเวลาชี้ */
            /* 2. เพิ่มความละมุน */
            transition: all 0.3s ease;
            /* ทำให้เวลาขยับดู Smooth ไม่กระตุก */
            box-shadow: 0 4px 15px rgba(255, 71, 87, 0.3);
            /* เงาสีเดียวกับปุ่ม */
            margin-top: 30px;
        }

        /* 3. เอฟเฟกต์เวลาเอาเมาส์ไปชี้ (Hover) */
        .btn-signup:hover {
            background-color: #ff6b81;
            /* สว่างขึ้นนิดหน่อย */
            transform: translateY(-3px);
            /* ลอยขึ้นข้างบน 3px */
            box-shadow: 0 8px 20px rgba(255, 71, 87, 0.5);
            /* เงาเข้มขึ้น */
        }

        /* 4. เอฟเฟกต์เวลากด (Active) */
        .btn-signup:active {
            transform: translateY(-1px);
            /* ยุบตัวลงเล็กน้อยเวลาคลิก */
        }

        /* ตกแต่งกล่อง Card */
        .card {
            width: 350px;
            /* กำหนดความกว้างของกล่อง */
            background-color: white;
            border-radius: 20px;
            /* มุมมน */
            overflow: hidden;
            /* สำคัญมาก! เพื่อให้รูปที่อยู่ข้างในโค้งตามมุมกล่อง */
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
            /* ใส่เงาฟุ้งๆ */
            transition: transform 0.3s ease;
            margin: 20px;
        }

        .card:hover {
            transform: scale(1.02);
            /* เวลาเมาส์ชี้ ให้กล่องขยายขึ้นนิดหน่อย */
        }

        /* ตกแต่งรูปภาพใน Card */
        .card-img {
            width: 100%;
            height: auto;
            display: block;
            /* แก้ปัญหาช่องว่างปริศนารอบรูปได้ชะงัด */
        }

        .card .card-img {
            margin-top: 0;
            /* เจาะจงว่าถ้าเป็นรูปใน card ให้ margin เป็น 0 */
        }

        /* ตกแต่งส่วนเนื้อหาด้านใน */
        .card-content {
            padding: 20px;
            /* เว้นระยะห่างจากขอบกล่องด้านใน */
            text-align: center;
        }

        .card-title {
            font-size: 22px;
            color: #2c3e50;
            margin: 0 0 10px 0;
            /* เว้นระยะห่างด้านล่างหัวข้อ */
        }

        .card-text {
            font-size: 15px;
            color: #7f8c8d;
            /* สีเทาให้อ่านง่ายขึ้น */
            line-height: 1.6;
            /* ระยะห่างระหว่างบรรทัด */
            margin-bottom: 20px;
        }

        .card img {
            border-radius: 20px;
            /* ทำมุมรูปให้มน (เหมือนใน Elementor) */
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
            /* ใส่เงาให้รูปดูมีมิติ */
            margin-top: 20px;
        }

        .container {
            display: flex;
            /* เปิดโหมดจัดแถว */
            flex-wrap: wrap;
            /* ถ้าจอแคบให้ขึ้นบรรทัดใหม่ (Responsive) */
            justify-content: center;
            /* จัดให้อยู่กลางจอ */
            gap: 20px;
            /* เว้นระยะห่างระหว่าง Card (เหมือน Gutter ใน Grid) */
            padding: 40px;
        }

        /* เมื่อหน้าจอมีความกว้างน้อยกว่า 768px (ขนาด Tablet/Mobile) */
        @media (max-width: 768px) {
            .container {
                flex-direction: column;
                /* เปลี่ยนจากเรียงแถวนอน เป็นแนวตั้ง */
                align-items: center;
                /* จัดให้ Card อยู่กลางจอ */
            }

            .card {
                width: 90%;
                /* ให้ Card กว้างเกือบเต็มหน้าจอมือถือ */
                max-width: 400px;
                /* แต่ไม่ให้ใหญ่เกินไป */
            }
        }
    </style>
</head>

<body>
    <h1>Web-Hawk</h1>
    <p>Welcome na Bro</p>
    <button class="btn-signup" id="evasiveButton" onmouseover="evadeMouse(this)">Click สิวะ</button>
    <img src="images/discord_icon_130958.png" alt="Girl in a jacket" width="30" height="30">
    <div id="admin-panel"
        style="background: white; padding: 25px; border-radius: 20px; margin-bottom: 30px; box-shadow: 0 10px 30px rgba(0,0,0,0.05); width: 100%; max-width: 850px; border: 1px solid #eee;">
        <h3 style="color: #2c3e50; margin-bottom: 20px; display: flex; align-items: center; gap: 10px;">
            <span
                style="background: #3498db; color: white; padding: 5px 10px; border-radius: 8px; font-size: 14px;">ADMIN</span>
            จัดการคอร์สเรียน
        </h3>

        <div style="display: flex; gap: 15px; flex-wrap: wrap;">
            <input type="text" id="new-title" placeholder="ชื่อคอร์ส"
                style="flex: 1; min-width: 200px; padding: 12px; border-radius: 10px; border: 1px solid #ddd; outline: none;">
            <input type="text" id="new-desc" placeholder="คำอธิบายสั้นๆ"
                style="flex: 2; min-width: 300px; padding: 12px; border-radius: 10px; border: 1px solid #ddd; outline: none;">

            <div style="display: flex; width: 100%; gap: 15px; margin-top: 5px; align-items: flex-end;">
                <div style="flex: 1; display: flex; flex-direction: column;">
                    <label for="new-image"
                        style="font-size: 12px; color: #7f8c8d; margin-bottom: 5px;">อัปโหลดรูปภาพจากเครื่อง:</label>
                    <input type="file" id="new-image" accept="image/*"
                        style="padding: 8px; border-radius: 10px; border: 1px solid #ddd; background: #f9f9f9; font-size: 12px;">
                </div>
                <button onclick="addNewCourse()"
                    style="padding: 12px 30px; background: #3498db; color: white; border: none; border-radius: 10px; cursor: pointer; font-weight: bold; height: 45px;">+
                    เพิ่มคอร์สใหม่</button>
                <button onclick="clearSystem()"
                    style="padding: 12px 15px; background: #95a5a6; color: white; border: none; border-radius: 10px; cursor: pointer; font-size: 12px; height: 45px;">ล้างระบบ</button>
            </div>
        </div>
    </div>
    <div style="text-align: center; margin: 20px;">
        <input type="text" id="search-input" placeholder="ค้นหาคอร์สเรียน..."
            style="padding: 10px; width: 300px; border-radius: 5px; border: 1px solid #ddd;">
    </div>

    <div class="container" id="course-container"></div>
    <div class="container">
        <div class="card">
            <img src="images/logo.png" alt="Course Thumbnail" class="card-img">
            <div class="card-content">
                <h2 class="card-title">Luna Online</h2>
                <p class="card-text">เริ่มต้นเรียนรู้ HTML, CSS และ JS ตั้งแต่ศูนย์จนเป็นมือโปร พร้อมโปรเจกต์ทำจริง</p>
                <button class="btn-signup" onclick="welcome(this)">สมัครเรียนเลย</button>
                <p class="message-text"></p>
            </div>
        </div>
        <div class="container" id="course-container">
        </div>
    </div>

    <script>
        // --- ส่วนการประกาศตัวแปรตอนเริ่มสคริปต์ ---

        // 1. ดึงข้อมูลดิบจากลิ้นชัก (Storage) มาดูก่อน
        const savedData = localStorage.getItem('webHawkCourses');

        // 2. ประกาศตัวแปร courses โดย "เช็คเงื่อนไข"
        let courses = savedData ? JSON.parse(savedData) : [
            // ถ้าไม่มีข้อมูลในลิ้นชัก (เปิดครั้งแรก) ให้ใช้ค่าพวกนี้
            { title: "Luna Online", description: "เริ่มต้นเรียนรู้ HTML, CSS และ JS", image: "images/logo.png" },
            { title: "คอร์สพื้นฐาน HTML", description: "เรียนรู้วิธีการวางโครงสร้างเว็บไซต์", image: "images/logo.png" },
            { title: "คอร์สตกแต่งด้วย CSS", description: "เปลี่ยนเว็บจืดๆ ให้สวยงามด้วย CSS3", image: "images/logo.png" }
        ];

        // 3. สั่งวาดหน้าจอทันที
        renderCourses(courses);
        function saveToLocalStorage() {
            localStorage.setItem('webHawkCourses', JSON.stringify(courses));
        }
        // 2. ฟังก์ชันแสดง Card (Render)
        function renderCourses(data) {
            const container = document.getElementById('course-container');
            container.innerHTML = '';

            data.forEach((course) => {
                container.innerHTML += `
            <div class="card" id="card-${course.title.replace(/\s+/g, '-')}">
                <img src="${course.image}" class="card-img">
                <div class="card-content">
                    <h2 class="card-title">${course.title}</h2>
                    <p class="card-text">${course.description}</p>
                    
                    <div style="display: flex; gap: 5px; justify-content: center; margin-top: 15px;">
                        <button class="btn-signup" style="margin:0; flex: 2; padding: 10px;" onclick="welcome(this)">สมัครเรียน</button>
                        <button onclick="editCourse('${course.title}')" style="padding: 5px 10px; background: #f1c40f; color: white; border: none; border-radius: 5px; cursor: pointer;">แก้ไข</button>
                        <button onclick="deleteCourse('${course.title}')" style="padding: 5px 10px; background: #e74c3c; color: white; border: none; border-radius: 5px; cursor: pointer;">ลบ</button>
                    </div>
                    <p class="message-text" style="margin-top:10px;"></p>
                </div>
            </div>
        `;
            });
        }
        function clearSystem() {
            if (confirm("ต้องการลบข้อมูลทั้งหมดและกลับไปเป็นค่าเริ่มต้นใช่ไหม?")) {
                localStorage.removeItem('webHawkCourses');
                location.reload(); // รีโหลดหน้าเว็บเพื่อให้กลับไปใช้ค่า Default ใน Code
            }
        }
        function editCourse(oldTitle) {
            // 1. หาตำแหน่งของคอร์สที่ต้องการแก้ไข
            const index = courses.findIndex(c => c.title === oldTitle);

            if (index !== -1) {
                // 2. ถามข้อมูลใหม่จาก User (ใช้ Prompt ง่ายๆ ก่อน)
                const newTitle = prompt("แก้ไขชื่อคอร์ส:", courses[index].title);
                const newDesc = prompt("แก้ไขรายละเอียด:", courses[index].description);

                // 3. ตรวจสอบว่า User ไม่ได้กดยกเลิก และไม่ได้ปล่อยว่าง
                if (newTitle && newDesc) {
                    // 4. อัปเดตข้อมูลใน Array
                    courses[index].title = newTitle;
                    courses[index].description = newDesc;

                    // 5. บันทึกและวาดหน้าจอใหม่
                    saveToLocalStorage();
                    renderCourses(courses);
                    alert("แก้ไขข้อมูลเรียบร้อยแล้ว!");
                }
            }
        }

        // 3. ฟังก์ชันตรวจสอบฟอร์ม (Form Validation) - เช็คตรงนี้เลย!
        function submitForm() {
            const nameValue = document.getElementById('user-name').value;
            const emailInput = document.getElementById('user-email');
            const nameError = document.getElementById('name-error');
            const emailError = document.getElementById('email-error');

            let isValid = true;

            // เช็คชื่อ
            if (nameValue.trim() === "") {
                nameError.style.display = 'block';
                isValid = false;
            } else {
                nameError.style.display = 'none';
            }

            // เช็คอีเมล (ต้องมี @)
            if (!emailInput.value.includes('@')) {
                emailError.style.display = 'block';
                isValid = false;
            } else {
                emailError.style.display = 'none';
            }

            if (isValid) {
                alert("ขอบคุณครับคุณ " + nameValue + " เราได้รับข้อมูลแล้ว!");
                document.getElementById('user-name').value = '';
                emailInput.value = '';
            }
        }
        function addNewCourse() {
            const titleInput = document.getElementById('new-title');
            const descInput = document.getElementById('new-desc');
            const imageInput = document.getElementById('new-image'); // ตัวเลือกไฟล์

            if (titleInput.value.trim() === "" || descInput.value.trim() === "") {
                alert("กรุณากรอกชื่อและรายละเอียดคอร์ส");
                return;
            }

            const file = imageInput.files[0]; // ดึงไฟล์ที่เลือกออกมา

            if (file) {
                // --- กรณีอัปโหลดรูปจากเครื่อง ---
                const reader = new FileReader();
                reader.onloadend = function () {
                    const base64String = reader.result; // นี่คือรูปภาพที่กลายเป็นข้อความแล้ว

                    const newCourse = {
                        title: titleInput.value,
                        description: descInput.value,
                        image: base64String
                    };

                    finalizeAddCourse(newCourse);
                }
                reader.readAsDataURL(file); // สั่งให้เริ่มแปลงไฟล์
            } else {
                // --- กรณีไม่ได้เลือกรูป ให้ใช้รูป Default ---
                const newCourse = {
                    title: titleInput.value,
                    description: descInput.value,
                    image: "images/logo.png"
                };
                finalizeAddCourse(newCourse);
            }

            // ฟังก์ชันช่วยบันทึกข้อมูล (เพื่อไม่ให้เขียนโค้ดซ้ำ)
            function finalizeAddCourse(course) {
                courses.push(course);
                saveToLocalStorage();
                renderCourses(courses);

                // ล้างค่าฟอร์ม
                titleInput.value = '';
                descInput.value = '';
                imageInput.value = '';
            }
        }
        function deleteCourse(courseTitle) {
            if (confirm(`คุณแน่ใจนะว่าจะลบ "${courseTitle}"?`)) {
                // หาตำแหน่งของคอร์สที่มี title ตรงกับที่ส่งมา
                const indexToDelete = courses.findIndex(c => c.title === courseTitle);

                if (indexToDelete !== -1) {
                    courses.splice(indexToDelete, 1);
                    saveToLocalStorage();
                    // สำคัญ: ต้องสั่งให้ Search ทำงานใหม่ หรือ Render ใหม่
                    const searchTerm = document.getElementById('search-input').value.toLowerCase();
                    const filtered = courses.filter(c => c.title.toLowerCase().includes(searchTerm));
                    renderCourses(filtered);
                }
            }
        }
        // 4. ฟังก์ชันเสริมอื่นๆ
        function welcome(btn) {
            const msg = btn.parentElement.querySelector('.message-text');
            msg.innerText = "เลือกคอร์สแล้ว!";
            msg.style.color = "#2ecc71";
            btn.style.backgroundColor = '#2ecc71';
        }

        function evadeMouse(btn) {
            const x = Math.random() * (window.innerWidth - btn.clientWidth);
            const y = Math.random() * (window.innerHeight - btn.clientHeight);
            btn.style.position = 'absolute';
            btn.style.left = x + 'px';
            btn.style.top = y + 'px';
        }

        // 5. ระบบค้นหา (Search)
        document.getElementById('search-input').addEventListener('input', (e) => {
            const term = e.target.value.toLowerCase();
            const filtered = courses.filter(c => c.title.toLowerCase().includes(term));
            renderCourses(filtered);
        });

        // สั่งรันครั้งแรก
        renderCourses(courses);
        // 1. ฟังก์ชันบันทึกข้อมูลลงลิ้นชัก Browser
        function saveToLocalStorage() {
            // ต้องแปลง Array เป็น String ก่อนเซฟ (เพราะ LocalStorage เก็บได้แต่ตัวหนังสือ)
            localStorage.setItem('webHawkCourses', JSON.stringify(courses));
        }

        // 2. ฟังก์ชันดึงข้อมูลจากลิ้นชักออกมาใช้
        function loadFromLocalStorage() {
            const savedData = localStorage.getItem('webHawkCourses');
            if (savedData) {
                // ถ้ามีข้อมูลเก่า ให้แปลงจาก String กลับมาเป็น Array แล้วทับค่าเดิม
                courses = JSON.parse(savedData);
            }
        }
    </script>
    <hr style="margin: 50px 0;">
    <div id="enrollment-form"
        style="max-width: 400px; margin: 0 auto; padding: 20px; background: #f9f9f9; border-radius: 10px;">
        <h3>ลงทะเบียนรับข่าวสารคอร์สใหม่</h3>
        <div style="margin-bottom: 10px;">
            <input type="text" id="user-name" placeholder="ชื่อ-นามสกุล"
                style="width: 100%; padding: 10px; box-sizing: border-box;">
            <small id="name-error" style="color: red; display: none;">กรุณากรอกชื่อด้วยจ้า</small>
        </div>
        <div style="margin-bottom: 10px;">
            <input type="email" id="user-email" placeholder="อีเมลของคุณ"
                style="width: 100%; padding: 10px; box-sizing: border-box;">
            <small id="email-error" style="color: red; display: none;">อีเมลไม่ถูกต้องนะ</small>
        </div>
        <button onclick="submitForm()"
            style="width: 100%; padding: 10px; background: #3498db; color: white; border: none; cursor: pointer; border-radius: 5px;">ส่งข้อมูล</button>
    </div>
</body>

</html>